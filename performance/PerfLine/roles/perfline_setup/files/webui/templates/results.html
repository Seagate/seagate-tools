<table width=100%>
  <tr>
    <td>
      Search(={{(names | filter:searchText).length}}):
      <br>
      <input class="form-control" ng-model="searchText" id="searchText">
      <br>
      Limit(={{limit}}):<br><select class="form-control"
			ng-init="limit='100'"
			ng-model="limit"
			ng-change="pageChanged()">
        <option value="100" selected>100</option>
        <option value="9999999">all</option>
      </select>
    </td>
  </tr>
</table>
<table class="table table-striped">
  <thead>
    <tr>
      <th>tid</th>
      <th>status</th>
      <th>user</th>
      <th>time</th>
	  <th>info</th>
	  <th>workload</th>
	  <th>params</th>
      <th>perf result</th>
      <th>artifacts</th>
    </tr>
  </thead>
  <tr ng-repeat="row in names | filter:searchText | limitTo:itemsPerPage:(currentPage-1)*itemsPerPage">
      <td>{{row.task_id_short}}</td>
      <td>{{row.status}}</td>
      <td>{{row.user}}</td>
      <td>
	<table>
	  <tr ng-repeat="(key,val) in row.time">
	    <td><u>{{key}}:</u><b>{{val}}</b></td>
	  </tr>
	</table>
      </td>
      <td>
	<!-- info -->
	<table>
	  <tr>
	    <td>
	      <u>description:</u> <b>{{row.desc}}</b>
	    </td>
	  <tr>
		<tr>
			<td>
			  <u>priority:</u> <b>{{row.prio}}</b>
			</td>
		<tr>
	</table>

	<!-- benchmark -->
	<td>
		<table>
			<tr ng-repeat="(key,val) in row.workload">
				<td>
				  <u>custom workload:</u> <b>{{val.cmd}}</b>
				</td>
			  </tr>
			<tr ng-repeat="(key,val) in row.benchmark">
				<td ng-if="val">
					<u>benchmark:</u> <b>{{key}}</b>
				</td>
			</tr>
		</table>
	</td>
	<!-- benchmark end -->

	<!-- params -->
	<td>
		<table ng-if="row.benchmark.s3bench">
			<tr ng-repeat="(key,val) in row.parameters">
				<td>
					<u>{{key}}:</u> <b>{{val}}</b>
				</td>
			</tr>
		</table>

		<table ng-if="row.benchmark.m0crate">
			<tr ng-repeat="(key,val) in row.m0crate_params">
				<td>
					<u>{{key}}:</u> <b>{{val}}</b>
				</td>
			</tr>
		</table>
	</td>
	<!-- params end -->

	<!-- perf metrics -->
	<td>
		<table>
			<tr ng-repeat="(k,metric) in row.perf_metrics">
				<td>
				{{metric.val}}
				</td>
			</tr>
		</table>
	</td>
	<!-- perf metrics end -->

      <td>
		  <table>
			  <tr>
				<td> <a href="{{row.perfagg.report_page}}">report</a> </td>
			  </tr>
			  <tr>
				  <td> <a href="{{row.artifacts.artifacts_page}}">artifacts</a> </td>
			  </tr>
		  </table>
      </td>
  </tr>
</table>
<table width=100%>
  <tr>
    <td>
      <ul uib-pagination
	  class="pagination-sm"
	  items-per-page="itemsPerPage"
	  total-items="(names | filter:searchText).length"
	  ng-model="currentPage"
	  ng-change="toTop()"></ul>
    </td>
  </tr>
</table>
